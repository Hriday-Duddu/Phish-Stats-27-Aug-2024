!function(i){i.fn.modalHome=function(o){o=i.extend({},{animation:"fadeAndPop",animationspeed:300,closeonbackgroundclick:!0,dismissmodalclass:"close-modalHome-modal"},o);return this.each(function(){var n=i(this),a=parseInt(n.css("top")),e=n.height()+a,t=!1,d=i(".modalHome-modal-bg");0==d.length&&(d=i('<div class="modalHome-modal-bg" />').insertAfter(n)),n.bind("modalHome:open",function(){d.unbind("click.modalEvent"),i("."+o.dismissmodalclass).unbind("click.modalEvent"),t||(c(),"fadeAndPop"==o.animation&&(n.css({top:i(document).scrollTop()-e,opacity:0,visibility:"visible"}),d.fadeIn(o.animationspeed/2),n.delay(o.animationspeed/2).animate({top:i(document).scrollTop()+a+"px",opacity:1},o.animationspeed,s())),"fade"==o.animation&&(n.css({opacity:0,visibility:"visible",top:i(document).scrollTop()+a}),d.fadeIn(o.animationspeed/2),n.delay(o.animationspeed/2).animate({opacity:1},o.animationspeed,s())),"none"==o.animation&&(n.css({visibility:"visible",top:i(document).scrollTop()+a}),d.css({display:"block"}),s())),n.unbind("modalHome:open")}),n.bind("modalHome:close",function(){t||(c(),"fadeAndPop"==o.animation&&(d.delay(o.animationspeed).fadeOut(o.animationspeed),n.animate({top:i(document).scrollTop()-e+"px",opacity:0},o.animationspeed/2,function(){n.css({top:a,opacity:1,visibility:"hidden"}),s()})),"fade"==o.animation&&(d.delay(o.animationspeed).fadeOut(o.animationspeed),n.animate({opacity:0},o.animationspeed,function(){n.css({opacity:1,visibility:"hidden",top:a}),s()})),"none"==o.animation&&(n.css({visibility:"hidden",top:a}),d.css({display:"none"}))),n.unbind("modalHome:close")}),n.trigger("modalHome:open");i("."+o.dismissmodalclass).bind("click.modalEvent",function(){n.trigger("modalHome:close")});function s(){t=!1}function c(){t=!0}o.closeonbackgroundclick&&(d.css({cursor:"pointer"}),d.bind("click.modalEvent",function(){n.trigger("modalHome:close")})),i("body").keyup(function(i){27===i.which&&n.trigger("modalHome:close")})})}}(jQuery);